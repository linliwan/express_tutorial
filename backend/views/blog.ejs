<%- include('./partial/header.ejs') %>

<%
// 将字符串转换为 Date 对象并格式化，这一段代码是服务器上执行的，客户端看不到这段代码
function formatDate (dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', { 
        month: 'short', 
        day: 'numeric', 
        year: 'numeric' 
    });
}
%>

<div id="container" class="container">

    <div class="blogContent">
        <div><a href="/">&laquo; Back to Home</a></div>
        
        <h1><%= blog.title %></h1>
        <div class="authorInfo">
            <div class="avatar">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                    <path d="M480-240Zm-320 80v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q37 0 73 4.5t72 14.5l-67 68q-20-3-39-5t-39-2q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32h240v80H160Zm400 40v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q8 9 12.5 20t4.5 22q0 11-4 22.5T903-340L683-120H560Zm300-263-37-37 37 37ZM620-180h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19ZM480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm0-80q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Z"/>
                </svg>
            </div>
            <div class="authorName">
                <strong><%= blog.username %></strong>
            </div>
            <div class="date">
                <%= formatDate(blog.created_at) %>
            </div>
        </div>

        <ul class="tags">
            <% blogTags.forEach(tag => {%>
                <li class="tag_<%= tag.id %>"><%= tag.name %> </li>
            <% }) %>
        </ul>
        <div class="mainContent">
            <div class="imageDiv"><img src="<%= blog.img %>" alt="image"></div>
            <p><%= blog.content %></p>
        </div>
    </div>
    
</div>
<%- include('./partial/footer.ejs') %>