[返回首页](../Readme.md)

# 性能优化

## 发现问题：src/db/dbTag.ts中getAllTags函数使用率很高
- 因为header.ejs需要用getAllTags()的结果来渲染导航条列表；
- 几乎每条web路由，都会用到；
- 当访问量大的时候，就会对数据库造成压力；
- 而tags列表的内容实际上不会频繁发生变化，甚至在这个例子中，都是固定的，我们没有提供任何针对tags条目进行增删的接口；

## 解决方案：设计一个缓存机制
- 每5分钟才真正去数据库查询一下tags列表；
- 当web路由或api路由请求getAlltags()时，直接回复缓存中的数据；